<form ng-submit="homeComp.search()">
  <input type="text" ng-model="homeComp.searchTerm" />
  <button type="submit">search</button>
</form>

<div ng-show="homeComp.results !== undefined && homeComp.results.length === 0">
  Sorry, no results.
</div>

<div ng-show="homeComp.results !== undefined && homeComp.results.length > 0"
     ng-repeat="result in homeComp.results">

  <h1>{{result.recipe.label}}</h1>

  <img ng-if="result.recipe.image !== 'N/A'" ng-src="{{result.recipe.image}}" />
  <img ng-if="result.recipe.image === 'N/A'" src="not-found.jpg">

  <p>See full recipe on: <a href="{{result.recipe.url}}">{{result.recipe.source}}</a></p>
  <button type="button" class="btn btn-primary" aria-pressed="false" autocomplete="off">
    <span class="glyphicon glyphicon-bookmark"></span> Save
  </button>

  <h2>{{result.recipe.ingredientLines.length}} Ingredients</h2>
  <p ng-repeat="each in result.recipe.ingredients">{{each.text}}</p>

  <h2>Nutrition </h2>
  <p> {{result.recipe.calories/result.recipe.yield | noDecimal}} <br> CALORIES/SERVING</p>
  <p> {{result.recipe.calories/result.recipe.yield | dailyCalPercent}}%<BR> DAILY VALUE</p>
  <P> {{result.recipe.yield}} <BR> SERVINGS </P>

  <h2>Preparation</h2>
  <p>
    <button type="button" class="btn btn-primary" aria-pressed="false" autocomplete="off">
       Instructions
    </button> on <a href="{{result.recipe.url}}">{{result.recipe.source}}</a>
  </p>

  <h3> <a href="#">{{result.recipe.dietLabels | showFirst}}</a> <a href="#">{{result.recipe.healthLabels | showFirst}}</a></h3>

  <canvas id="canvas" height="300" width="300"></canvas>

  <div ng-repeat="all in result.recipe.digest">
    <p> <a ng-click="all.isHidingOpen = !all.isHidingOpen"
      class="glyphicon glyphicon-play"> {{all.label | addButton}}</a>
      {{all.total/result.recipe.yield | noDecimal}}{{all.unit}}
      {{(all.total/result.recipe.yield)/all.daily | percentage}}%
    </p>
    <p ng-show="all.isHidingOpen"
       ng-repeat="subitem in all.sub">
      {{subitem.label}}
      {{subitem.total/result.recipe.yield | noDecimal}}{{subitem.unit}}
      {{(subitem.total/result.recipe.yield)/subitem.daily | percentage}}%
    </p>
  </div>

</div>
